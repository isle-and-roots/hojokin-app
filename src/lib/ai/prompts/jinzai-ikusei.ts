import type { BusinessProfile } from "@/types";
import { profileContext } from "./shared";

const PROMPTS: Record<
  string,
  (profile: BusinessProfile, context?: string) => string
> = {
  career_up_plan: (profile, context) =>
    `あなたは中小企業診断士・社会保険労務士として、キャリアアップ助成金のキャリアアップ計画書の「キャリアアップ計画」セクションを作成してください。

## 事業者情報
${profileContext(profile)}

${context ? `## 追加情報\n${context}\n` : ""}
## 作成ルール
1. 対象となる非正規雇用労働者の現在の雇用形態・人数・配属先を明記する
2. キャリアアップに向けた基本方針（正社員化の目的・意義）を示す
3. 正社員化の目標人数と達成時期を具体的に記載する
4. 対象労働者の選定基準（勤続年数、能力評価、本人の意向等）を示す
5. キャリアアップに関する社内での周知方法を記載する
6. 200〜400字程度で簡潔に記述する

## 審査のポイント
キャリアアップ助成金では、計画の具体性と実現可能性が重視されます。「優秀な人材を正社員化する」という漠然とした記述ではなく、対象者の現状と転換後の処遇を具体的に示してください。

## 出力形式
セクション本文をそのまま出力してください（マークダウン書式は使用しない、プレーンテキスト）。
情報が不足している箇所は [要入力: ○○] と明示してください。`,

  conversion_details: (profile, context) =>
    `あなたは中小企業診断士・社会保険労務士として、キャリアアップ助成金の計画書の「正社員化の取組内容」セクションを作成してください。

## 事業者情報
${profileContext(profile)}

${context ? `## 追加情報\n${context}\n` : ""}
## 作成ルール
1. 正社員転換の対象者を具体的に記述する（職種、現在の雇用形態、勤続期間）
2. 転換予定時期（何年何月）を明記する
3. 転換後の処遇改善内容を具体的に示す:
   - 賃金の増加（転換前→転換後の月額、3%以上の増加を明示）
   - 雇用契約期間の変更（有期→無期）
   - 賞与・退職金制度の適用
   - 社会保険の加入状況の変化
4. 就業規則における正社員転換制度の規定内容に触れる
5. 200〜400字程度で記述する

## 審査のポイント
転換前後の処遇の違いが明確でないと不支給になります。特に賃金3%以上の増加は必須要件です。転換前と転換後の賃金額を具体的に記載し、増加率を明示してください。

## 出力形式
セクション本文をそのまま出力してください（マークダウン書式は使用しない、プレーンテキスト）。
情報が不足している箇所は [要入力: ○○] と明示してください。`,

  follow_up: (profile, context) =>
    `あなたは中小企業診断士・社会保険労務士として、キャリアアップ助成金の計画書の「転換後のフォローアップ」セクションを作成してください。

## 事業者情報
${profileContext(profile)}

${context ? `## 追加情報\n${context}\n` : ""}
## 作成ルール
1. 正社員化後の研修・教育訓練計画を記載する（OJT・OFF-JT の内容と期間）
2. キャリア形成支援の仕組み（目標設定面談、スキルマップ、昇格基準等）を示す
3. 定着促進のための取り組み（メンター制度、定期面談、働きやすい環境整備等）を記述する
4. 正社員化後6か月間のフォロー体制を具体的に示す
5. 200〜300字程度で簡潔に記述する

## 出力形式
セクション本文をそのまま出力してください（マークダウン書式は使用しない、プレーンテキスト）。
情報が不足している箇所は [要入力: ○○] と明示してください。`,

  training_plan: (profile, context) =>
    `あなたは中小企業診断士として、人材開発支援助成金の職業訓練実施計画届の「訓練計画の概要」セクションを作成してください。

## 事業者情報
${profileContext(profile)}

${context ? `## 追加情報\n${context}\n` : ""}
## 作成ルール
1. 実施する訓練の名称・内容を具体的に記載する
2. 訓練の目的（どのような課題を解決するための訓練か）を明確にする
3. 訓練対象者の人数・職種・現在のスキルレベルを示す
4. 訓練の形式（OFF-JT / OJT / 併用）と期間・時間数を明記する
5. 訓練の実施場所・講師（社内講師 or 外部機関）を記載する
6. 300〜500字程度で記述する

## 審査のポイント
人材開発支援助成金では、OFF-JTが10時間以上であることが要件です。訓練内容が事業に直結し、受講者のスキル向上が事業の生産性向上につながることを明確に示してください。

## 出力形式
セクション本文をそのまま出力してください（マークダウン書式は使用しない、プレーンテキスト）。
情報が不足している箇所は [要入力: ○○] と明示してください。`,

  skill_goals: (profile, context) =>
    `あなたは中小企業診断士として、人材開発支援助成金の職業訓練実施計画届の「習得させる能力・スキル」セクションを作成してください。

## 事業者情報
${profileContext(profile)}

${context ? `## 追加情報\n${context}\n` : ""}
## 作成ルール
1. 訓練を通じて習得させる具体的な能力・技術を箇条書きで示す
2. 各スキルの到達目標レベルを明記する（資格取得、作業の独立遂行等）
3. 現在のスキルレベルと訓練後の到達目標の差分を示す
4. 習得したスキルが実務でどう活用されるかを記述する
5. 200〜400字程度で記述する

## 出力形式
セクション本文をそのまま出力してください（マークダウン書式は使用しない、プレーンテキスト）。
情報が不足している箇所は [要入力: ○○] と明示してください。`,

  business_effect: (profile, context) =>
    `あなたは中小企業診断士として、人材開発支援助成金の職業訓練実施計画届の「事業への効果」セクションを作成してください。

## 事業者情報
${profileContext(profile)}

${context ? `## 追加情報\n${context}\n` : ""}
## 作成ルール
1. 訓練実施による生産性向上効果を定量的に示す（作業時間短縮、品質向上率、売上寄与額等）
2. 従業員のモチベーション向上・定着率向上への効果を記述する
3. 組織全体への波及効果（技術の横展開、後進育成等）に触れる
4. 中長期的な事業成長への貢献を示す
5. 200〜300字程度で簡潔に記述する

## 出力形式
セクション本文をそのまま出力してください（マークダウン書式は使用しない、プレーンテキスト）。
情報が不足している箇所は [要入力: ○○] と明示してください。`,
};

export function getJinzaiIkuseiPrompt(
  sectionKey: string,
  profile: BusinessProfile,
  additionalContext?: string
): string {
  const builder = PROMPTS[sectionKey];
  if (!builder) {
    throw new Error(`Unknown jinzai-ikusei section key: ${sectionKey}`);
  }
  return builder(profile, additionalContext);
}
