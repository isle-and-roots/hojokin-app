import type { BusinessProfile } from "@/types";
import { profileContext } from "./shared";

const PROMPTS: Record<
  string,
  (profile: BusinessProfile, context?: string) => string
> = {
  business_situation: (profile, context) =>
    `あなたは中小企業診断士として、雇用調整助成金の休業等実施計画届の「事業活動の状況」セクションを作成してください。

## 事業者情報
${profileContext(profile)}

${context ? `## 追加情報\n${context}\n` : ""}
## 作成ルール
1. 事業活動の縮小の原因を具体的に記述する（景気変動、産業構造の変化、新型コロナ等の経済上の理由）
2. 売上高・生産量の推移を直近3か月の月平均と前年同期との比較で示す（10%以上の減少を明示）
3. 事業活動縮小の影響の程度（対象労働者数、休業日数の見込み等）を記述する
4. 業界全体のトレンドと自社への影響を客観的に説明する
5. 一時的な縮小であり、経済上の理由によるものであることを明確にする
6. 300〜500字程度で記述する

## 審査のポイント
雇用調整助成金では「経済上の理由」による一時的な事業活動の縮小であることの証明が重要です。売上・生産量の具体的な数値で10%以上の減少を示し、季節的変動や事業者の都合による縮小ではないことを明確にしてください。

## 出力形式
セクション本文をそのまま出力してください（マークダウン書式は使用しない、プレーンテキスト）。
情報が不足している箇所は [要入力: ○○] と明示してください。`,

  adjustment_plan: (profile, context) =>
    `あなたは中小企業診断士として、雇用調整助成金の休業等実施計画届の「雇用調整の実施計画」セクションを作成してください。

## 事業者情報
${profileContext(profile)}

${context ? `## 追加情報\n${context}\n` : ""}
## 作成ルール
1. 実施する雇用調整の種類（休業・教育訓練・出向）を明確にする
2. 対象労働者数（全対象者数と雇用調整参加者数）を記載する
3. 休業の実施期間・実施日・時間数（1日単位または時間単位）を具体的に示す
4. 教育訓練を実施する場合は、訓練の内容・時間数・実施機関を記載する
5. 休業手当の支払い方法（休業前賃金の60%以上であることを明示）を示す
6. 労使協定の内容（対象者の範囲、休業の上限日数等）に触れる
7. 300〜500字程度で記述する

## 審査のポイント
雇用調整の内容は、労使間の協定に基づくものであることが必須です。休業手当が休業前賃金の60%以上であることを明示し、対象者と実施期間を具体的に示してください。教育訓練を組み合わせる場合は、訓練内容がOFF-JTであることを明確にしてください。

## 出力形式
セクション本文をそのまま出力してください（マークダウン書式は使用しない、プレーンテキスト）。
情報が不足している箇所は [要入力: ○○] と明示してください。`,

  recovery_outlook: (profile, context) =>
    `あなたは中小企業診断士として、雇用調整助成金の休業等実施計画届の「事業回復の見通し」セクションを作成してください。

## 事業者情報
${profileContext(profile)}

${context ? `## 追加情報\n${context}\n` : ""}
## 作成ルール
1. 事業活動が回復する見通しの時期を具体的に示す（例：〇ヶ月後、〇年〇月頃）
2. 回復の根拠となる要因（市場環境の改善、受注回復の見込み、新規顧客獲得等）を記述する
3. 雇用調整終了後に対象労働者の雇用を維持する方針を明確にする
4. 回復期に向けた経営改善・事業立て直しの取り組みがあれば記載する
5. 200〜300字程度で簡潔に記述する

## 審査のポイント
雇用調整助成金は一時的な雇用調整が対象です。事業活動の回復が見込まれる合理的な根拠を示し、調整終了後も対象労働者の雇用を維持する意思を明確にしてください。回復の見通しが全くない場合は支給対象外となるため、具体的な回復シナリオを記述することが重要です。

## 出力形式
セクション本文をそのまま出力してください（マークダウン書式は使用しない、プレーンテキスト）。
情報が不足している箇所は [要入力: ○○] と明示してください。`,
};

export function getKoyouChouseiPrompt(
  sectionKey: string,
  profile: BusinessProfile,
  additionalContext?: string
): string {
  const builder = PROMPTS[sectionKey];
  if (!builder) {
    throw new Error(`Unknown koyou-chousei section key: ${sectionKey}`);
  }
  return builder(profile, additionalContext);
}
