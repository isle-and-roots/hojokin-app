# Plans.md — hojokin-app

Updated: 2026-02-26

## 現状サマリー

- **Phase 1〜6 全完了** — プロダクト開発完了、Vercel デプロイ済み
- 課金: Polar.sh (JPY対応済み)、payout設定完了（Identity審査中）
- SEO: 16記事 + JSON-LD + OGメタデータ + サイトマップ + FAQページ + 補助金診断LP
- FULL AI対応補助金: 持続化(1) + IT導入(4) + ものづくり(1) + 省力化(1) + 新事業進出(1) + 成長加速化(1) = **9件**
- Analytics: Vercel Analytics + SpeedInsights + PostHog 28イベント + A/Bテスト基盤
- LP: 11セクション + ソーシャルプルーフ + 信頼性バッジ + A/Bテスト CTA
- メール: Resend 7通ナーチャリングシーケンス + Vercel Cron 日次配信
- プロフィール: 構造化入力（ドロップダウン + ピルボタン） + 都道府県対応

---

## Phase 4-5 ✅ 完了

- **Phase 4** (Task 20-29): Analytics・LP・OGP・パフォーマンス・SNSテンプレ・プレイブック
- **Phase 5** (Task 30): プロフィール構造化入力・都道府県対応
- 残: Task 22 実決済E2Eテスト（Polar Identity審査完了後）

---

## Phase 6 ✅ 完了: グロース & コンバージョン最適化

**全9タスク完了** (Task 31-39)

| タスク | 状態 | 概要 |
|--------|------|------|
| Task 31: ブログ記事公開 + SEO | done | 10→13記事、RelatedPosts統合 |
| Task 32: メールキャプチャー | done | LP + Exit Intent + email_leads API |
| Task 33: オンボーディング改善 | done | プログレッシブプロファイリング + ウェルカムモーダル |
| Task 34: 料金ページ改善 | done | 年間/月間トグル + アンカープラン + FAQ強化 |
| Task 35: 新補助金FULL AI | done | 省力化・新事業進出・成長加速化の3件追加 |
| Task 36: アップセル導線強化 | done | DOCXペイウォール + クォータウィジェット + 品質比較 |
| Task 37: メールシーケンス | done | Resend 7通 + Vercel Cron + PostHogトラッキング |
| Task 38: A/Bテスト基盤 | done | PostHog Feature Flags + Hero CTA テスト |
| Task 39: ソーシャルプルーフ | done | FAQ反論3問 + 信頼性バッジ + FAQページ(JSON-LD) |

### Phase 6 品質ゲート ✅

```bash
npx tsc --noEmit    # ✅ 型エラーゼロ
npm run lint         # ✅ 警告ゼロ
npm run build        # ✅ ビルド成功
```

---

## Phase 7: ユーザー獲得 & 運用（次フェーズ）

**目標**: 初月50サインアップ、3ヶ月で有料5人、MRR ¥15,000
**戦略**: コンテンツマーケ + SNS + パートナーシップ

### 未実装タスク（マーケティング計画より）

| # | タスク | 種別 | 状態 |
|---|--------|------|------|
| Task 40 | X/Twitter 5投稿（締切アラート・記事シェア） | 手動 | WIP (docs/twitter-drafts.md 作成済み、投稿待ち) |
| Task 41 | note.com に記事1本投稿 | 手動 | WIP (docs/note-article-draft.md 作成済み、投稿待ち) |
| Task 42 | Google Search Console サイトマップ送信 | 手動 | WIP (docs/search-console-setup.md + middleware修正済み) |
| Task 43 | 週次ブログ記事3本追加 | cc | done |
| Task 44 | SEO最適化ラウンド1（メタデータ・内部リンク・サイトマップ強化） | cc | done |
| Task 45 | 「補助金診断」LP作成（/shindan — 3問→最適補助金表示） | cc | done |
| Task 46 | パートナーアウトレイチテンプレート作成（税理士・診断士・行政書士） | cc | done |
| Task 47 | ブログCTA最適化（中間CTA + 末尾CTA強化 + PostHogトラッキング） | cc | done |
| Task 48 | 12週レトロスペクティブ | cc | done |
| Task 49 | DBスキーマ不整合の再発防止プロセス（3レイヤー） | cc | done |
| Task 50 | email_leads テーブル本番追加（db:check で検出） | cc | done |

### Vercel 環境変数（要設定）

| 変数名 | 用途 | 状態 |
|--------|------|------|
| `RESEND_API_KEY` | メール送信 | 要設定 |
| `CRON_SECRET` | Cron認証 | 要設定 |
| `EMAIL_FROM` | 送信元アドレス | 要設定 |

### PostHog 設定（要設定）

- `hero-cta-text` Feature Flag 作成（control / variant_a）

---

## 12週レトロスペクティブ

Updated: 2026-02-28

### 達成サマリー

Phase 1〜7 の約12週間で、補助金申請AIサービス「補助金サポート」を0からフルプロダクトとしてリリース。課金基盤・AI生成・SEO・メール・A/Bテスト・DBスキーマ整合性管理まで一人開発で実装・本番デプロイ済み。

### 技術メトリクス

| 項目 | 数値 |
|------|------|
| APIルート数 | 15本（AI生成・課金・エクスポート・Cron・Webhook等） |
| DBテーブル数 | 5テーブル（schema.sql） + 3マイグレーション |
| ブログ記事数 | 16本 |
| 補助金データ数 | 105件（12カテゴリ） |
| FULL AI対応補助金 | 9件（持続化×1、IT導入×4、ものづくり×1、省力化×1、新事業進出×1、成長加速化×1） |
| AIプロンプト種類 | 7種（専用6 + 汎用1） |
| 課金プラン数 | 4プラン（Free / Starter ¥980 / Pro ¥2,980 / Business ¥9,800） |
| PostHogイベント数 | 約54イベント |
| メールシーケンス | 7通（Day 0/1/3/7/14/21/30） |
| 依存パッケージ | 24本（本番）+ 14本（開発） |
| 品質ゲートチェック | tsc + lint + db:check + build の4段階 |

### 良かった点

1. **スピード**: Phase 1〜7まで12週間でフルスタックSaaSを完成・本番デプロイ
2. **品質規律**: 全フェーズで tsc/lint/build の品質ゲートを通過し、型エラーゼロを維持
3. **段階的マネタイズ**: 課金・クォータ・ペイウォールの3レイヤーでFree→Pro転換導線を早期に構築
4. **SEOの早期着手**: ブログ16本・JSON-LD・サイトマップ・FAQページをPhase 4〜6で整備し、オーガニック流入基盤を確立
5. **DBスキーマ安全性**: db:check スクリプト + /api/health による自動検証で本番障害リスクを低減

### 改善が必要な点

1. **DBスキーマドリフト問題**: email_leads テーブルがコードより先行してデプロイされ、後からスキーマ追加が必要になった（Task 50）。マイグレーションファーストの徹底が不十分
2. **テスト不足**: 決済E2Eテスト（Task 22）がPolar Identity審査待ちで未完了。課金ロジックの自動テストが弱い
3. **メール配信未設定**: Resend APIキー・CRON_SECRETが本番環境変数に未設定のままでメールシーケンスが稼働していない
4. **SNS・note未実施**: Task 40〜42（X/Twitter投稿・note記事・Search Console）が手動タスクとして積み残し
5. **実ユーザーデータ不足**: サインアップ数・転換率・AI生成完了率など実績KPIが計測できていない状態でのリリース

### 学び

- **品質ゲートの早期導入効果**: tsc + lint + db:check を1コマンドにまとめた品質ゲートが、後半フェーズのバグ混入を防止した
- **静的データの強み**: 補助金データをDBではなくTypeScriptファイルで管理する設計が、型安全性・バージョン管理・デプロイ速度の面で有効だった
- **DBスキーマドリフトは発生する**: コードとDBの乖離は防止プロセスを持たないと確実に発生する。3レイヤー（migration + check script + health API）での対策が有効
- **マーケ施策は技術実装後に積み残しになりやすい**: 手動タスクは自動化できないため、スケジュールより意図的な優先付けが必要

### Phase 8 提案

| 優先度 | タスク | 根拠 |
|--------|--------|------|
| 高 | Vercel環境変数設定（Resend/Cron/Email） | メールシーケンス稼働でナーチャリング開始 |
| 高 | SNS・Search Console初期設定（Task 40-42） | オーガニック流入獲得の起点 |
| 高 | 実決済E2Eテスト（Task 22） | 課金フローの信頼性担保 |
| 中 | ユーザー獲得KPI計測ダッシュボード | 意思決定のためのデータ基盤 |
| 中 | 補助金FULL AI対応拡充（+3〜5件） | Pro転換価値の向上 |
| 低 | リファラルプログラム実装 | パートナー獲得後に優先度上昇 |

---

## 12週マーケティングスケジュール

### Week 3-4: デプロイ + 初回公開 ← 現在

- SNS初投稿（X/Twitter 5本）
- note.com 記事1本
- Search Console サイトマップ送信
- はてなブックマーク セルフブクマ

### Week 5-8: コンテンツ量産

- ブログ記事2本/週
- X/Twitter 5投稿/週
- SEO最適化ラウンド1（Week 6）
- 中間SEO監査 + 内部リンク最適化（Week 8）

### Week 9-12: グロース + パートナーシップ

- 「補助金診断」LP作成（Week 9）
- パートナーメール送信（Week 10）
- ブログCTA最適化（Week 11）
- 12週レトロスペクティブ（Week 12）

### 期待成果（12週後）

- ブログ 23本、X/Twitter 50投稿、note.com 10記事
- オーガニック流入 500-1,000/月
- サインアップ 10-50件
- Free→Pro 転換率 5%
